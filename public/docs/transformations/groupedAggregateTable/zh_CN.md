# Grouped aggregate table

## 概述

Grouped aggregate table 可以将表格数据按指定字段进行分组，并对其他字段应用聚合函数。通过这个转换器，您可以将原始的明细数据转换为聚合后的汇总数据，便于分析和展示。

## 功能特性

- **多字段分组**：支持按一个或多个字段进行数据分组
- **多种聚合函数**：支持求和、平均值、计数、最大值、最小值、最后值、方差、标准差等聚合计算
- **灵活配置**：每个字段可以独立配置为分组字段或聚合字段
- **多聚合支持**：单个字段可以同时应用多种聚合函数

## 支持的聚合函数

| 聚合函数 | 说明   | 示例             |
| -------- | ------ | ---------------- |
| sum      | 求和   | 将所有数值相加   |
| avg      | 平均值 | 计算数值的平均值 |
| count    | 计数   | 统计非空值的个数 |
| max      | 最大值 | 找出最大的数值   |
| min      | 最小值 | 找出最小的数值   |
| last     | 最后值 | 取最后一个值     |
| variance | 方差   | 计算数值的方差   |
| stdDev   | 标准差 | 计算数值的标准差 |

## 使用示例

### 基本分组示例

**场景：** 按服务器分组，计算 CPU 使用率的平均值和最大值

**配置：**

- 分组字段：server
- 聚合字段：cpu_usage（计算平均值和最大值）

## 数据转换示例

### 输入数据

原始监控数据：

| 服务器  | CPU 使用率 | 内存使用率 |
| ------- | ---------- | ---------- |
| server1 | 80%        | 60%        |
| server2 | 75%        | 55%        |
| server1 | 85%        | 65%        |
| server2 | 70%        | 50%        |

### 输出数据

经过分组聚合转换后的结果：

| 服务器  | CPU 使用率(平均值) | CPU 使用率(最大值) |
| ------- | ------------------ | ------------------ |
| server1 | 82.5%              | 85%                |
| server2 | 72.5%              | 75%                |

### 多字段分组示例

**场景：** 按服务器和区域分组，计算多个指标

**配置：**

- 分组字段：server, region
- 聚合字段：
  - cpu_usage：计算平均值、最大值、最小值
  - memory_usage：计算最后值和平均值
  - request_count：计算总和和计数

**输入数据：**

| 服务器  | 区域    | CPU 使用率 | 内存使用率 | 请求数 |
| ------- | ------- | ---------- | ---------- | ------ |
| server1 | us-east | 80%        | 60%        | 100    |
| server1 | us-east | 85%        | 65%        | 120    |
| server1 | us-west | 75%        | 55%        | 90     |
| server2 | us-east | 70%        | 50%        | 80     |
| server2 | us-west | 78%        | 58%        | 110    |

**输出数据：**

| 服务器  | 区域    | CPU(平均) | CPU(最大) | CPU(最小) | 内存(最后值) | 内存(平均) | 请求总和 | 请求计数 |
| ------- | ------- | --------- | --------- | --------- | ------------ | ---------- | -------- | -------- |
| server1 | us-east | 82.5%     | 85%       | 80%       | 65%          | 62.5%      | 220      | 2        |
| server1 | us-west | 75%       | 75%       | 75%       | 55%          | 55%        | 90       | 1        |
| server2 | us-east | 70%       | 70%       | 70%       | 50%          | 50%        | 80       | 1        |
| server2 | us-west | 78%       | 78%       | 78%       | 58%          | 58%        | 110      | 1        |

## 配置说明

### 字段操作类型

| 操作类型  | 说明     | 用途                       |
| --------- | -------- | -------------------------- |
| groupby   | 分组字段 | 用于数据分组的维度字段     |
| aggregate | 聚合字段 | 需要进行聚合计算的数值字段 |
